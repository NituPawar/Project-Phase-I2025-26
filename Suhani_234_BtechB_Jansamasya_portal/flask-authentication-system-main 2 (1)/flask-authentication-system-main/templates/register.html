<link rel="stylesheet" href="{{ url_for('static', filename='css_for_r_and_l.css') }}" />
<head>
    <style>
        /* keep previous styles for purple text/link and increased size */
        p.account-text {
            color: purple;
            font-size: 1rem;
        }
        a.login-link {
            color: purple !important;
            text-decoration: underline;
            font-weight: 600;
            font-size: 1.4rem; /* increased size for "Login here" */
        }
    </style>
</head>
{% block content %}
    <h1>Register here!ðŸ‘‡</h1>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <form method="POST" action="/register">
        <input type="text" name="name" placeholder="Name" required><br>
        <input type="email" name="email" placeholder="Email" required><br>
        <!-- <input type="password" id="password" name="password" placeholder="Password" required><br>
        <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm Password" required><br> -->
        <input type="text" name="phone" id="phone" placeholder=" Phone number" pattern="[789][0-9]{9}" title="Enter 10 digit phone number starting with 7,8,or 9" required maxlength="10"><br>
        <input type="text" name="address" id="address" placeholder="Address" required><br>
        <input type="password" id="password" name="password" placeholder="Password" required><br>
        <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm Password" required><br>
        <button type="submit" class="btn btn-primary">Register</button>
        <p class="account-text">Already have an account? <a href="{{ url_for('login') }}" class="login-link">Login here</a></p>

    </form>
    <script>
        // client-side confirm password check
        const form = document.querySelector('form[action="/register"]');
        if (form) {
            form.addEventListener('submit', function(e) {
                const pwd = document.getElementById('password').value;
                const cpwd = document.getElementById('confirm_password').value;
                const phone = document.getElementById('phone').value;
                const phoneRegex = /^[789][0-9]{9}$/;
                if (pwd !== cpwd) {
                    e.preventDefault();
                    alert('Passwords do not match.');
                    return false;
                }
                if (!phoneRegex.test(phone)) {
                    e.preventDefault();
                    alert('Phone number must be 10 digits and start with 7, 8, or 9.');
                    return false;
                }
                return true;
            });
        }
    </script>
{% endblock %}
{% block footer %}{% endblock %}
